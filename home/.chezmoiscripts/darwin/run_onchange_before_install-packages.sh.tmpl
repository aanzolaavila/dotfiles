#!/bin/bash

set -eufo pipefail

{{ $brews := list
     "asciinema"
     "sqlite"
     "bat"
     "bitwarden-cli"
     "bluetoothconnector"
     "gcc"
     "btop"
     "python@3.9"
     "ruby"
     "cocoapods"
     "coreutils"
     "cowsay"
     "entr"
     "exa"
     "fd"
     "lame"
     "fortune"
     "fswatch"
     "fzf"
     "ghostscript"
     "git"
     "gnupg"
     "gomplate"
     "gradle"
     "grep"
     "htop"
     "iftop"
     "imagemagick"
     "jq"
     "yq"
     "lolcat"
     "lua"
     "magic-wormhole"
     "mas"
     "mockery"
     "protobuf"
     "mysql"
     "mysql-client"
     "ncdu"
     "nmap"
     "openjdk"
     "openssl@3"
     "p7zip"
     "parallel"
     "pipenv"
     "reattach-to-user-namespace"
     "ripgrep"
     "rmlint"
     "smartmontools"
     "ssh-copy-id"
     "terminal-notifier"
     "tealdeer"
     "tmux"
     "tree"
     "uncrustify"
     "vifm"
     "watch"
     "wget"
     "youtube-dl"
     "zplug"
     "sdkman-cli"
     "luarocks"
     "dust"
     "caarlos0/tap/timer"
     "xwmx/taps/nb" -}}
{{ $casks := list
     "adoptopenjdk8"
     "docker"
     "font-3270-nerd-font"
     "font-agave-nerd-font"
     "font-anonymice-nerd-font"
     "font-arimo-nerd-font"
     "font-aurulent-sans-mono-nerd-font"
     "font-awesome-terminal-fonts"
     "font-bigblue-terminal-nerd-font"
     "font-bitstream-vera-sans-mono-nerd-font"
     "font-blex-mono-nerd-font"
     "font-caskaydia-cove-nerd-font"
     "font-code-new-roman-nerd-font"
     "font-cousine-nerd-font"
     "font-daddy-time-mono-nerd-font"
     "font-dejavu-sans-mono-nerd-font"
     "font-droid-sans-mono-nerd-font"
     "font-fantasque-sans-mono-nerd-font"
     "font-fira-code"
     "font-fira-code-nerd-font"
     "font-fontawesome"
     "font-go-mono-nerd-font"
     "font-gohufont-nerd-font"
     "font-hack-nerd-font"
     "font-hasklug-nerd-font"
     "font-heavy-data-nerd-font"
     "font-hurmit-nerd-font"
     "font-im-writing-nerd-font"
     "font-inconsolata-go-nerd-font"
     "font-inconsolata-lgc-nerd-font"
     "font-inconsolata-nerd-font"
     "font-iosevka-nerd-font"
     "font-jetbrains-mono-nerd-font"
     "font-lekton-nerd-font"
     "font-liberation-nerd-font"
     "font-meslo-lg-nerd-font"
     "font-monofur-nerd-font"
     "font-monoid-nerd-font"
     "font-mononoki-nerd-font"
     "font-mplus-nerd-font"
     "font-noto-nerd-font"
     "font-open-dyslexic-nerd-font"
     "font-overpass-nerd-font"
     "font-profont-nerd-font"
     "font-proggy-clean-tt-nerd-font"
     "font-roboto-mono-nerd-font"
     "font-sauce-code-pro-nerd-font"
     "font-shure-tech-mono-nerd-font"
     "font-space-mono-nerd-font"
     "font-terminess-ttf-nerd-font"
     "font-tinos-nerd-font"
     "font-ubuntu-mono-nerd-font"
     "font-ubuntu-nerd-font"
     "font-victor-mono-nerd-font"
     "goland"
     "graalvm-ce-lts-java11"
     "intellij-idea"
     "kitty"
     "slack"
     "spotify"
     "visual-studio-code"
     "vlc" -}}

{{- if .personal -}}
{{   $brews = concat $brews (list
       "ansible"
       "llvm"
       "graphviz"
       "ffmpeg"
       "hugo") -}}
{{   $casks = concat $casks (list
       "android-platform-tools"
       "android-studio"
       "anki"
       "clion"
       "eqmac"
       "flutter"
       "teamviewer"
       "loopback"
       "ngrok"
       "notion"
       "obsidian"
       "omnidisksweeper"
       "plex-media-server"
       "qbittorrent"
       "raspberry-pi-imager"
       "rekordbox"
       "signal"
       "skype"
       "wireshark"
       "telegram"
       "zoom"
       "whatsapp") -}}
{{- end -}}

{{- if .meli -}}
{{   $brews = concat $brews (list
       "colima"
       "pipx") -}}
{{   $casks = concat $casks (list
	   "dbeaver-community"
       ) -}}
{{- end -}}


brew bundle --no-lock --file=/dev/stdin <<EOF
tap "adoptopenjdk/openjdk"
tap "aws/tap"
tap "graalvm/tap"
tap "hashicorp/tap"
tap "homebrew/bundle"
tap "homebrew/cask"
tap "homebrew/cask-fonts"
tap "homebrew/core"
tap "xwmx/taps"
tap "sdkman/tap"
{{ range ($brews | sortAlpha | uniq) -}}
brew "{{ . }}"
{{ end -}}
{{ range ($casks | sortAlpha | uniq) -}}
cask "{{ . }}"
{{ end -}}
EOF
